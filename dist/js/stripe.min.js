var stripe=Stripe("pk_live_rXCEuBCvrxpJN7xTuXXq0k9000pgqRnipP"),elements=stripe.elements();const baseUrl="https://snooze.pythonanywhere.com";var style={base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},card=elements.create("card",{style:style});card.mount("#card-element");var userId="none";if(null!=getUrlVars().user_id)userId=getUrlVars().user_id;else{userId=generateUUID();var link=document.getElementById("type-form");link.setAttribute("href","https://noah596066.typeform.com/to/rnaqI8?user_id="+userId)}function onReceiveClientSecret(e){document.getElementById("card-button").addEventListener("click",function(t){console.log("clicked submit"),stripe.handleCardSetup(e,card,{payment_method_data:{billing_details:{name:"no_name"}}}).then(function(e){e.error||(console.log("success got token",e),apiRequest("PUT",baseUrl+"/add_stripe_customer?user_id="+userId+"&payment_method="+e.setupIntent.payment_method),window.location.replace("https://snoozeyoulose.io"))})})}function apiRequest(e,t,n){var o=new XMLHttpRequest;o.onload=function(){o.status>=200&&o.status<300?(console.log("success!",o.responseText),n(o.responseText)):console.log("The request failed!")},o.open(e,t),o.send()}function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,o){e[n]=o});return e}function generateUUID(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}console.log(userId),apiRequest("GET",baseUrl+"/signup_button",onReceiveClientSecret);